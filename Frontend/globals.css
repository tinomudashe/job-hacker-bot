@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ... existing code ... */

/* Custom utility classes for PDF dialog improvements */
@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari, Opera */
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Better mobile form styling */
  .mobile-input-text {
    font-size: 16px; /* Prevents zoom on iOS */
  }
  
  /* Improved focus states for mobile */
  .mobile-focus:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
  }
}

/* Modal scroll lock for mobile - using :has() selector */
body:has([data-radix-dialog-overlay][data-state="open"]) {
  overflow: hidden;
  scrollbar-gutter: stable;
}

/* Enhanced dialog content styling */
[data-radix-dialog-content] {
  transform-style: preserve-3d;
  backface-visibility: hidden;
}

/* Better textarea focus and cursor behavior */
[data-scrollable="true"] {
  scroll-behavior: smooth;
}

[data-scrollable="true"]:focus {
  outline: none;
  caret-color: #3b82f6;
}

/* Improved mobile text input behavior */
@supports (-webkit-touch-callout: none) {
  [data-scrollable="true"] {
    /* Prevent iOS zoom on focus */
    transform: translateZ(0);
    -webkit-overflow-scrolling: touch;
  }
}

/* iOS Safari specific scroll fixes */
@supports (-webkit-touch-callout: none) {
  body:has([data-radix-dialog-overlay][data-state="open"]) {
    position: fixed;
    width: 100%;
    top: var(--body-scroll-y, 0);
  }
  
  /* Prevent zooming when focusing inputs on iOS */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="url"],
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* Fallback for browsers that don't support :has() */
.modal-open {
  overflow: hidden !important;
  scrollbar-gutter: stable;
}

/* Better dark mode support */
@media (prefers-color-scheme: dark) {
  :root {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
  }
}

/* Animation improvements */
@layer components {
  .fade-in {
    animation: fadeIn 0.2s ease-in-out;
  }
  
  .slide-up {
    animation: slideUp 0.3s ease-out;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(10px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Mobile-friendly utilities for PDF dialog */
@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari, Opera */
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Enhanced scrollbar styling for better UX */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.5);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgba(156, 163, 175, 0.8);
  }
  
  /* Dark mode scrollbar */
  .dark .scrollbar-thin {
    scrollbar-color: rgba(107, 114, 128, 0.5) transparent;
  }
  
  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(107, 114, 128, 0.5);
  }
  
  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgba(107, 114, 128, 0.8);
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    /* Prevent iOS Safari bounce scrolling */
    overscroll-behavior: none;
    /* Improve touch scrolling on mobile */
    -webkit-overflow-scrolling: touch;
    /* Better mobile scroll performance */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  html, body, #__next {
    height: 100%;
    overflow-x: hidden;
  }

  /* Mobile-specific improvements */
  @media (max-width: 640px) {
    body {
      /* Prevent zoom on input focus */
      font-size: 16px;
      /* Better touch scrolling */
      -webkit-overflow-scrolling: touch;
      /* Prevent overscroll bounce */
      overscroll-behavior-y: contain;
      /* Hardware acceleration for smoother scrolling */
      transform: translate3d(0, 0, 0);
      -webkit-transform: translate3d(0, 0, 0);
    }
    
    /* Improve button touch targets */
    button, a, input, textarea, select {
      /* Minimum touch target size */
      min-height: 44px;
      /* Better touch response */
      touch-action: manipulation;
    }
    
    /* Smooth scrolling for all scrollable elements */
    * {
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }
    
    /* Better momentum scrolling */
    .overflow-y-auto, .overflow-auto {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      /* Prevent scroll chaining */
      scroll-snap-stop: normal;
    }
  }

  /* iOS Safari specific improvements */
  @supports (-webkit-touch-callout: none) {
    body {
      /* Prevent iOS zoom on focus */
      transform: translateZ(0);
      -webkit-overflow-scrolling: touch;
      /* Better scroll momentum */
      -webkit-transform: translate3d(0, 0, 0);
    }
    
    /* Prevent zooming when focusing inputs on iOS */
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="url"],
    input[type="search"],
    textarea,
    select {
      font-size: 16px !important;
      /* Prevent zoom on focus */
      transform: translateZ(0);
      -webkit-transform: translateZ(0);
    }
    
    /* Better scrolling performance on iOS */
    .overflow-y-auto, .overflow-auto {
      -webkit-overflow-scrolling: touch;
      will-change: scroll-position;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }
  }

  /* Android Chrome specific improvements */
  @media screen and (max-width: 640px) and (-webkit-min-device-pixel-ratio: 1) {
    body {
      /* Better scroll performance on Android */
      transform: translateZ(0);
    }
    
    /* Smoother scrolling on Android */
    .overflow-y-auto, .overflow-auto {
      scroll-behavior: smooth;
      overscroll-behavior: contain;
    }
  }
} 